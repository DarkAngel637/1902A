{"ast":null,"code":"var _jsxFileName = \"/Users/MJ/web/project/1902A/redux-car-thunk/src/pages/main/Car.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Letter from '../../components/Letter';\nimport Brand from '../../components/Brand';\nimport Dialog from '../../components/Dialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Car extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      letterList: [],\n      // 品牌首字母列表\n      brandList: [],\n      // 品牌列表\n      curLetter: '',\n      // 当前选中品牌首字母\n      curBrandId: '',\n      // 当前选中品牌\n      showDialog: false // 是否展示弹框\n\n    };\n    this.changCurLetter = this.changCurLetter.bind(this);\n    this.changeCurBrand = this.changeCurBrand.bind(this);\n    this.closeDialog = this.closeDialog.bind(this);\n  }\n\n  async componentDidMount() {\n    let result = await axios.get('http://baojia.chelun.com/v2-car-getMasterBrandList.html?_1625034677422');\n    console.log(result);\n\n    if (result.status === 200) {\n      let letterList = [...new Set(result.data.data.map(item => item.Spelling[0]))];\n      let brandList = {};\n      result.data.data.forEach(item => {\n        let letter = item.Spelling[0];\n\n        if (brandList[letter]) {\n          brandList[letter].push(item);\n        } else {\n          brandList[letter] = [item];\n        }\n      });\n      this.setState({\n        letterList,\n        curLetter: letterList[0],\n        brandList\n      });\n    }\n  }\n\n  changCurLetter(letter) {\n    this.setState({\n      curLetter: letter\n    });\n  }\n\n  changeCurBrand(brandId) {\n    this.setState({\n      curBrandId: brandId,\n      showDialog: true\n    }, () => {\n      this.props.history.push(`/main/car/sale/${brandId}`);\n    });\n  }\n\n  closeDialog() {\n    this.setState({\n      showDialog: false\n    });\n  }\n\n  render() {\n    let {\n      letterList,\n      brandList,\n      curLetter,\n      showDialog,\n      curBrandId\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '100%',\n        boxSizing: 'border-box',\n        paddingBottom: '50px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Brand, {\n        brandList: brandList,\n        curLetter: curLetter,\n        changeCurBrand: this.changeCurBrand\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Letter, {\n        letterList: letterList,\n        changCurLetter: this.changCurLetter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), showDialog && /*#__PURE__*/_jsxDEV(Dialog, {\n        closeDialog: this.closeDialog,\n        curBrandId: curBrandId,\n        routes: this.props.routes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/MJ/web/project/1902A/redux-car-thunk/src/pages/main/Car.js"],"names":["React","Component","axios","Letter","Brand","Dialog","Car","constructor","props","state","letterList","brandList","curLetter","curBrandId","showDialog","changCurLetter","bind","changeCurBrand","closeDialog","componentDidMount","result","get","console","log","status","Set","data","map","item","Spelling","forEach","letter","push","setState","brandId","history","render","height","boxSizing","paddingBottom","routes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport Letter from '../../components/Letter'\nimport Brand from '../../components/Brand'\nimport Dialog from '../../components/Dialog'\n\nexport default class Car extends Component {\n\n    constructor(props) {\n        super(props)\n        this.changCurLetter = this.changCurLetter.bind(this);\n        this.changeCurBrand = this.changeCurBrand.bind(this);\n        this.closeDialog = this.closeDialog.bind(this);\n    }\n\n    state = {\n        letterList: [], // 品牌首字母列表\n        brandList: [],  // 品牌列表\n        curLetter: '',  // 当前选中品牌首字母\n        curBrandId: '', // 当前选中品牌\n        showDialog: false   // 是否展示弹框\n    }\n\n    async componentDidMount(){\n        let result = await axios.get('http://baojia.chelun.com/v2-car-getMasterBrandList.html?_1625034677422');\n        console.log(result)\n        if (result.status === 200){\n            let letterList = [...new Set(result.data.data.map(item=>item.Spelling[0]))]\n            let brandList = {};\n            result.data.data.forEach(item=>{\n                let letter = item.Spelling[0];\n                if (brandList[letter]){\n                    brandList[letter].push(item);\n                }else{\n                    brandList[letter] = [item];\n                }\n            })\n            this.setState({\n                letterList,\n                curLetter: letterList[0],\n                brandList\n            })\n        }\n    }\n\n    changCurLetter(letter){\n        this.setState({\n            curLetter: letter\n        })\n    }\n\n    changeCurBrand(brandId){\n        this.setState({\n            curBrandId: brandId,\n            showDialog: true\n        }, ()=>{\n            this.props.history.push(`/main/car/sale/${brandId}`)\n        })\n    }\n\n    closeDialog(){\n        this.setState({\n            showDialog: false\n        })\n    }\n\n    render() {\n        let {letterList, brandList, curLetter, showDialog, curBrandId} = this.state;\n        return (\n            <div style={{height: '100%',boxSizing: 'border-box', paddingBottom: '50px'}}>\n                <Brand brandList={brandList} curLetter={curLetter} changeCurBrand={this.changeCurBrand}/>\n                <Letter letterList={letterList} changCurLetter={this.changCurLetter}/>\n\n                {/* 车型弹窗 */}\n                {showDialog && <Dialog closeDialog={this.closeDialog} curBrandId={curBrandId} routes={this.props.routes}></Dialog>}\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}