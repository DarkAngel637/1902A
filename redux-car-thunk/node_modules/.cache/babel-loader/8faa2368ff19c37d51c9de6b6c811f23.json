{"ast":null,"code":"var _jsxFileName = \"/Users/MJ/web/project/1902A/redux-car-thunk/src/pages/main/Car.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Letter from '../../components/Letter';\nimport Brand from '../../components/Brand';\nimport Dialog from '../../components/Dialog'; // 引入thunk\n\nimport { getBrandList } from '../../store/thunk';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Car extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      letterList: [],\n      // 品牌首字母列表\n      brandList: [],\n      // 品牌列表\n      curLetter: '',\n      // 当前选中品牌首字母\n      curBrandId: '',\n      // 当前选中品牌\n      showDialog: false // 是否展示弹框\n\n    };\n    this.changCurLetter = this.changCurLetter.bind(this);\n    this.changeCurBrand = this.changeCurBrand.bind(this);\n    this.closeDialog = this.closeDialog.bind(this);\n  }\n\n  async componentDidMount() {\n    this.props.getBrandList(); // let result = await axios.get('http://baojia.chelun.com/v2-car-getMasterBrandList.html?_1625034677422');\n    // console.log(result)\n    // if (result.status === 200){\n    //     let letterList = [...new Set(result.data.data.map(item=>item.Spelling[0]))]\n    //     let brandList = {};\n    //     result.data.data.forEach(item=>{\n    //         let letter = item.Spelling[0];\n    //         if (brandList[letter]){\n    //             brandList[letter].push(item);\n    //         }else{\n    //             brandList[letter] = [item];\n    //         }\n    //     })\n    //     this.setState({\n    //         letterList,\n    //         curLetter: letterList[0],\n    //         brandList\n    //     })\n    // }\n  }\n\n  changCurLetter(letter) {\n    this.setState({\n      curLetter: letter\n    });\n  }\n\n  changeCurBrand(brandId) {\n    this.setState({\n      curBrandId: brandId,\n      showDialog: true\n    }, () => {\n      this.props.history.push(`/main/car/sale/${brandId}`);\n    });\n  }\n\n  closeDialog() {\n    this.setState({\n      showDialog: false\n    });\n  }\n\n  render() {\n    let {\n      letterList,\n      brandList,\n      curLetter,\n      showDialog,\n      curBrandId\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '100%',\n        boxSizing: 'border-box',\n        paddingBottom: '50px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Brand, {\n        brandList: brandList,\n        curLetter: curLetter,\n        changeCurBrand: this.changeCurBrand\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Letter, {\n        letterList: letterList,\n        changCurLetter: this.changCurLetter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), showDialog && /*#__PURE__*/_jsxDEV(Dialog, {\n        closeDialog: this.closeDialog,\n        curBrandId: curBrandId,\n        routes: this.props.routes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return state;\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getBrandList: () => {\n      dispatch(getBrandList());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Car);","map":{"version":3,"sources":["/Users/MJ/web/project/1902A/redux-car-thunk/src/pages/main/Car.js"],"names":["React","Component","axios","connect","Letter","Brand","Dialog","getBrandList","Car","constructor","props","state","letterList","brandList","curLetter","curBrandId","showDialog","changCurLetter","bind","changeCurBrand","closeDialog","componentDidMount","letter","setState","brandId","history","push","render","height","boxSizing","paddingBottom","routes","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport {connect} from 'react-redux'\n\nimport Letter from '../../components/Letter'\nimport Brand from '../../components/Brand'\nimport Dialog from '../../components/Dialog'\n// 引入thunk\nimport {getBrandList} from '../../store/thunk'\n\nclass Car extends Component {\n\n    constructor(props) {\n        super(props)\n        this.changCurLetter = this.changCurLetter.bind(this);\n        this.changeCurBrand = this.changeCurBrand.bind(this);\n        this.closeDialog = this.closeDialog.bind(this);\n    }\n\n    state = {\n        letterList: [], // 品牌首字母列表\n        brandList: [],  // 品牌列表\n        curLetter: '',  // 当前选中品牌首字母\n        curBrandId: '', // 当前选中品牌\n        showDialog: false   // 是否展示弹框\n    }\n\n    async componentDidMount(){\n        this.props.getBrandList();\n        // let result = await axios.get('http://baojia.chelun.com/v2-car-getMasterBrandList.html?_1625034677422');\n        // console.log(result)\n        // if (result.status === 200){\n        //     let letterList = [...new Set(result.data.data.map(item=>item.Spelling[0]))]\n        //     let brandList = {};\n        //     result.data.data.forEach(item=>{\n        //         let letter = item.Spelling[0];\n        //         if (brandList[letter]){\n        //             brandList[letter].push(item);\n        //         }else{\n        //             brandList[letter] = [item];\n        //         }\n        //     })\n        //     this.setState({\n        //         letterList,\n        //         curLetter: letterList[0],\n        //         brandList\n        //     })\n        // }\n    }\n\n    changCurLetter(letter){\n        this.setState({\n            curLetter: letter\n        })\n    }\n\n    changeCurBrand(brandId){\n        this.setState({\n            curBrandId: brandId,\n            showDialog: true\n        }, ()=>{\n            this.props.history.push(`/main/car/sale/${brandId}`)\n        })\n    }\n\n    closeDialog(){\n        this.setState({\n            showDialog: false\n        })\n    }\n\n    render() {\n        let {letterList, brandList, curLetter, showDialog, curBrandId} = this.state;\n        return (\n            <div style={{height: '100%',boxSizing: 'border-box', paddingBottom: '50px'}}>\n                <Brand brandList={brandList} curLetter={curLetter} changeCurBrand={this.changeCurBrand}/>\n                <Letter letterList={letterList} changCurLetter={this.changCurLetter}/>\n\n                {/* 车型弹窗 */}\n                {showDialog && <Dialog closeDialog={this.closeDialog} curBrandId={curBrandId} routes={this.props.routes}></Dialog>}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state=>{\n    return state;\n}\n\nconst mapDispatchToProps = dispatch =>{\n    return {\n        getBrandList: ()=>{\n            dispatch(getBrandList())\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Car)"]},"metadata":{},"sourceType":"module"}